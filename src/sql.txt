CREATE or REPLACE TRIGGER AutoIncrement
BEFORE INSERT ON MediaItems
FOR EACH ROW
DECLARE
	maxMid NUMBER;
BEGIN
	:new.TITLE_LENGTH:=LENGTH(:new.TITLE);

	SELECT MAX(MID) INTO maxMid FROM MediaItems;
	IF maxMid IS NULL THEN
        :new.MID:= 0;
	ELSE
        :new.MID:= maxMid + 1;
	END IF;
END;

CREATE or REPLACE FUNCTION MaximalDistance
Return NUMBER is
    minYear NUMBER;
    maxYear NUMBER;

BEGIN
     SELECT MIN(PROD_YEAR) INTO minYear
     FROM MEDIAITEMS;
     SELECT MAX(PROD_YEAR) INTO maxYear
     FROM MEDIAITEMS;
     RETURN POWER(maxYear - minYear, 2);
END;

CREATE or REPLACE FUNCTION SimCalculation (MIDa NUMBER, MIDb NUMBER, maxDist NUMBER)
Return FLOAT is
    MIDaYear NUMBER;
    MIDbYear NUMBER;

BEGIN
     SELECT PROD_YEAR INTO MIDaYear
     FROM MEDIAITEMS
     WHERE MID = MIDa;

     SELECT PROD_YEAR INTO MIDbYear
     FROM MEDIAITEMS
     WHERE MID = MIDb;

RETURN POWER(MIDaYear - MIDbYear, 2) / maxDist;
END;
